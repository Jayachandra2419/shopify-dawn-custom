{% comment %}
Kid Product List ‚Äî simple loop + if practice
Add in: Customize ‚Üí Add section ‚Üí Kid Product List
{% endcomment %}

<section style="padding:20px 0;">
  <div class="page-width">
    <h2 style="margin:0 0 12px 0;">{{ section.settings.heading | default: 'My Products' | escape }}</h2>

    {% assign coll = section.settings.collection %}
    {% if coll == blank %}
      <p>Pick a collection in the section settings.</p>
    {% else %}
      <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px;">
        {% for product in coll.products limit: 4 %}
          {% if section.settings.only_in_stock and product.available == false %}
            {% continue %}
          {% endif %}

          <article style="border:1px solid #eee;border-radius:10px;padding:10px;">
            <a href="{{ product.url }}" style="text-decoration:none;">
              <div style="font-weight:600;margin-bottom:6px;">
                {{ forloop.index }}. {{ product.title | escape }}
              </div>

              <div style="margin-bottom:6px;">
                Price: <strong>{{ product.price | money }}</strong>
              </div>

              {% if product.available %}
                <div>‚úÖ In stock</div>
              {% else %}
                <div>‚ùå Out of stock</div>
              {% endif %}

              {% if product.compare_at_price > product.price %}
                <div style="margin-top:6px;">üü¢ On sale!</div>
              {% endif %}
            </a>
          </article>
        {% else %}
          <p>No products found.</p>
        {% endfor %}
      </div>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Kid Product List",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "My Products" },
    { "type": "collection", "id": "collection", "label": "Choose a collection" },
    { "type": "checkbox", "id": "only_in_stock", "label": "Hide out-of-stock items", "default": false }
  ],
  "presets": [{ "name": "Kid Product List" }]
}
{% endschema %}
